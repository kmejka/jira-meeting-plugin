!function(a){function b(b,d){function e(b){if(f.push(b),f.length===h){for(var c=[],e=0;e<h;e+=1)c[e]=f[e].exports;d&&d.apply(a,c)}}var f=[],g=0,h=b.length;if(b&&b.length>0)for(;g<h;g+=1)c(b[g],e);else d&&d()}function c(a,b){b(d(a))}function d(b){return f[b]=f[b]||{"name":b,"exports":function(){function b(){var c=b.__target__;if(c)return c.apply(a,arguments)}return b}()}}var e=a._AP?_AP:a.RA=a.AP={},f={};e.define=function(c,e,f){var g,h=d(c);f||(f=e,e=[]),f&&(g="function"!=typeof f?function(){return f}:f,b(e,function(){var b=g.apply(a,arguments);if(b){"function"==typeof b&&(h.exports.__target__=b);for(var c in b)b.hasOwnProperty(c)&&(h.exports[c]=b[c])}}))},e.require=function(a,c){b("string"==typeof a?[a]:a,c)}}(this),AP.define("_util",function(){"use strict";function a(a,b){var c,d;if(a)if(c=a.length,null!=c&&"function"!=typeof a)for(d=0;d<c&&b.call(a[d],d,a[d])!==!1;)d+=1;else for(d in a)if(a.hasOwnProperty(d)&&b.call(a[d],d,a[d])===!1)break}function b(a,b){return a+="EventListener",b+="Event",function(c,d,e){c[a]?c[a](d,e,!1):c[b]&&c[b]("on"+d,e)}}function c(){var a=this.console;if(a&&a.log){var b=[].slice.call(arguments);if(a.log.apply)a.log.apply(a,b);else{for(var c=0,d=b.length;c<d;c+=1)b[c]=JSON.stringify(b[c]);a.log(b.join(" "))}return!0}}function d(a){return null==a?null:decodeURIComponent(a.replace(/\+/g,"%20"))}return{"each":a,"extend":function(b){var c=arguments,d=[].slice.call(c,1,c.length);return a(d,function(c,d){a(d,function(a,c){b[a]=c})}),b},"bind":b("add","attach"),"unbind":b("remove","detach"),"trim":function(a){return a&&a.replace(/^\s+|\s+$/g,"")},"debounce":function(a,b){var c;return function(){function d(){c=null,a.apply(e,f)}var e=this,f=[].slice.call(arguments);c&&clearTimeout(c),c=setTimeout(d,b||50)}},"inArray":function(a,b,c){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a,c);for(var d=c>>>0,e=b.length>>>0;d<e;d+=1)if(b[d]===a)return d;return-1},"isFunction":function(a){return"function"==typeof a},"log":c,"handleError":function(a){if(!c.apply(this,a&&a.message?[a,a.message]:[a]))throw a},"decodeQueryComponent":d}}),AP.define("_dollar",["_util"],function(a){"use strict";function b(b,f){f=f||e;var g=[];if(b)if("string"==typeof b){var h=f.querySelectorAll(b);c(h,function(a,b){g.push(b)})}else 1===b.nodeType?g.push(b):b===window&&g.push(b);return d(g,{"each":function(a){return c(this,a),this},"bind":function(b,c){this.each(function(d,e){a.bind(e,b,c)})},"attr":function(a){var b;return this.each(function(c,d){return b=d[a]||d.getAttribute&&d.getAttribute(a),!b}),b},"removeClass":function(a){return this.each(function(b,c){c.className&&(c.className=c.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))})},"html":function(a){return this.each(function(b,c){c.innerHTML=a})},"append":function(a){return this.each(function(b,d){var e=f.createElement(a.tag);c(a,function(a,b){"$text"===a?e.styleSheet?e.styleSheet.cssText=b:e.appendChild(f.createTextNode(b)):"tag"!==a&&(e[a]=b)}),d.appendChild(e)})}}),g}var c=a.each,d=a.extend,e=window.document;return d(b,a)}),("undefined"!=typeof _AP?define:AP.define)("_events",["_dollar"],function(a){"use strict";function b(a,b){this._key=a,this._origin=b,this._events={},this._any=[]}function c(a,b){for(var c=0;c<a.length;++c)try{a[c].apply(null,b)}catch(a){e(a.stack||a.message||a)}}var d=window,e=d.AJS&&d.AJS.log||d.console&&d.console.log||function(){},f=b.prototype;return f.on=function(a,b){return a&&b&&this._listeners(a).push(b),this},f.once=function(a,b){var c=this,d=function(){c.off(a,d),b.apply(null,arguments)};return this.on(a,d),this},f.onAny=function(a){return this._any.push(a),this},f.off=function(b,c){var d=this._events[b];if(d){var e=a.inArray(c,d);e>=0&&d.splice(e,1),0===d.length&&delete this._events[b]}return this},f.offAll=function(a){return a?delete this._events[a]:this._events={},this},f.offAny=function(b){var c=this._any,d=a.inArray(b,c);return d>=0&&c.splice(d,1),this},f.emit=function(a){return this._emitEvent(this._event.apply(this,arguments))},f._event=function(a){return{"name":a,"args":[].slice.call(arguments,1),"attrs":{},"source":{"key":this._key,"origin":this._origin}}},f._emitEvent=function(a){var b=a.args.concat(a);return c(this._listeners(a.name),b),c(this._any,[a.name].concat(b)),this},f._listeners=function(a){return this._events[a]=this._events[a]||[]},{"Events":b}}),("undefined"!=typeof _AP?define:AP.define)("_base64",["_dollar"],function(a){"use strict";function b(){this.buffer=[]}function c(a){this._input=a,this._index=-1,this._buffer=[]}function d(a){this._input=a,this._index=-1,this._buffer=[]}function e(a){return g.encode(a)}function f(a){return g.decode(a)}b.prototype.append=function(a){return this.buffer.push(a),this},b.prototype.toString=function(){return this.buffer.join("")};var g={"codex":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=","encode":function(a){for(var d=new b,e=new c(a);e.moveNext();){var f=e.current;e.moveNext();var g=e.current;e.moveNext();var h=e.current,i=f>>2,j=(3&f)<<4|g>>4,k=(15&g)<<2|h>>6,l=63&h;isNaN(g)?k=l=64:isNaN(h)&&(l=64),d.append(this.codex.charAt(i)+this.codex.charAt(j)+this.codex.charAt(k)+this.codex.charAt(l))}return d.toString()},"decode":function(a){for(var c=new b,e=new d(a);e.moveNext();){var f=e.current;if(f<128)c.append(String.fromCharCode(f));else if(f>191&&f<224){e.moveNext();var g=e.current;c.append(String.fromCharCode((31&f)<<6|63&g))}else{e.moveNext();var g=e.current;e.moveNext();var h=e.current;c.append(String.fromCharCode((15&f)<<12|(63&g)<<6|63&h))}}return c.toString()}};return c.prototype={"current":Number.NaN,"moveNext":function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var a=this._input.charCodeAt(++this._index);return 13==a&&10==this._input.charCodeAt(this._index+1)&&(a=10,this._index+=2),a<128?this.current=a:a>127&&a<2048?(this.current=a>>6|192,this._buffer.push(63&a|128)):(this.current=a>>12|224,this._buffer.push(a>>6&63|128),this._buffer.push(63&a|128)),!0}},d.prototype={"current":64,"moveNext":function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var a=g.codex.indexOf(this._input.charAt(++this._index)),b=g.codex.indexOf(this._input.charAt(++this._index)),c=g.codex.indexOf(this._input.charAt(++this._index)),d=g.codex.indexOf(this._input.charAt(++this._index)),e=a<<2|b>>4,f=(15&b)<<4|c>>2,h=(3&c)<<6|d;return this.current=e,64!=c&&0!=f&&this._buffer.push(f),64!=d&&0!=h&&this._buffer.push(h),!0}},{"encode":e,"decode":f}}),("undefined"!=typeof _AP?define:AP.define)("_uri",[],function(){function a(a){return a&&(a=a.toString().replace(e.pluses,"%20"),a=decodeURIComponent(a)),a}function b(a){var b=e.uri_parser,c=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],d=b.exec(a||""),f={};return c.forEach(function(a,b){f[a]=d[b]||""}),f}function c(b){var c,d,f,g,h,i,j,k=[];if("undefined"==typeof b||null===b||""===b)return k;for(0===b.indexOf("?")&&(b=b.substring(1)),d=b.toString().split(e.query_separator),c=0,j=d.length;c<j;c++)f=d[c],g=f.indexOf("="),0!==g&&(h=a(f.substring(0,g)),i=a(f.substring(g+1)),k.push(g===-1?[f,null]:[h,i]));return k}function d(a){this.uriParts=b(a),this.queryPairs=c(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var e={"starts_with_slashes":/^\/+/,"ends_with_slashes":/\/+$/,"pluses":/\+/g,"query_separator":/[&;]/,"uri_parser":/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};return Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;d<f;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(a){d.prototype[a]=function(b){return"undefined"!=typeof b&&(this.uriParts[a]=b),this.uriParts[a]}}),d.prototype.hasAuthorityPrefix=function(a){return"undefined"!=typeof a&&(this.hasAuthorityPrefixUserPref=a),null===this.hasAuthorityPrefixUserPref?this.uriParts.source.indexOf("//")!==-1:this.hasAuthorityPrefixUserPref},d.prototype.isColonUri=function(a){return"undefined"==typeof a?!!this.uriParts.isColonUri:void(this.uriParts.isColonUri=!!a)},d.prototype.query=function(a){var b,d,e,f="";for("undefined"!=typeof a&&(this.queryPairs=c(a)),b=0,e=this.queryPairs.length;b<e;b++)d=this.queryPairs[b],f.length>0&&(f+="&"),null===d[1]?f+=d[0]:(f+=d[0],f+="=","undefined"!=typeof d[1]&&(f+=encodeURIComponent(d[1])));return f.length>0?"?"+f:f},d.prototype.getQueryParamValue=function(a){var b,c,d;for(c=0,d=this.queryPairs.length;c<d;c++)if(b=this.queryPairs[c],a===b[0])return b[1]},d.prototype.getQueryParamValues=function(a){var b,c,d,e=[];for(b=0,d=this.queryPairs.length;b<d;b++)c=this.queryPairs[b],a===c[0]&&e.push(c[1]);return e},d.prototype.deleteQueryParam=function(b,c){var d,e,f,g,h,i=[];for(d=0,h=this.queryPairs.length;d<h;d++)e=this.queryPairs[d],f=a(e[0])===a(b),g=e[1]===c,(1!==arguments.length||f)&&(2!==arguments.length||f&&g)||i.push(e);return this.queryPairs=i,this},d.prototype.addQueryParam=function(a,b,c){return 3===arguments.length&&c!==-1?(c=Math.min(c,this.queryPairs.length),this.queryPairs.splice(c,0,[a,b])):arguments.length>0&&this.queryPairs.push([a,b]),this},d.prototype.hasQueryParam=function(a){var b,c=this.queryPairs.length;for(b=0;b<c;b++)if(this.queryPairs[b][0]==a)return!0;return!1},d.prototype.replaceQueryParam=function(b,c,d){var e,f,g=-1,h=this.queryPairs.length;if(3===arguments.length){for(e=0;e<h;e++)if(f=this.queryPairs[e],a(f[0])===a(b)&&decodeURIComponent(f[1])===a(d)){g=e;break}g>=0&&this.deleteQueryParam(b,a(d)).addQueryParam(b,c,g)}else{for(e=0;e<h;e++)if(f=this.queryPairs[e],a(f[0])===a(b)){g=e;break}this.deleteQueryParam(b),this.addQueryParam(b,c,g)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(a){var b="set"+a.charAt(0).toUpperCase()+a.slice(1);d.prototype[b]=function(b){return this[a](b),this}}),d.prototype.scheme=function(){var a="";return this.protocol()?(a+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(a+=":"),a+="//"):this.hasAuthorityPrefix()&&this.host()&&(a+="//"),a},d.prototype.origin=function(){var a=this.scheme();return this.userInfo()&&this.host()&&(a+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a+="@")),this.host()&&(a+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(a+=":"+this.port())),a},d.prototype.addTrailingSlash=function(){var a=this.path()||"";return"/"!==a.substr(-1)&&this.path(a+"/"),this},d.prototype.toString=function(){var a,b=this.origin();return this.isColonUri()?this.path()&&(b+=":"+this.path()):this.path()?(a=this.path(),e.ends_with_slashes.test(b)||e.starts_with_slashes.test(a)?(b&&b.replace(e.ends_with_slashes,"/"),a=a.replace(e.starts_with_slashes,"/")):b+="/",b+=a):this.host()&&(this.query().toString()||this.anchor())&&(b+="/"),this.query().toString()&&(b+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(b+="#"),b+=this.anchor()),b},d.prototype.clone=function(){return new d(this.toString())},{"init":d}}),("undefined"!=typeof _AP?define:AP.define)("_ui-params",["_dollar","_base64","_uri"],function(a,b,c){return{"encode":function(a){if(a)return b.encode(JSON.stringify(a))},"fromUrl":function(a){var a=new c.init(a),b=a.getQueryParamValue("ui-params");return this.decode(b)},"fromWindowName":function(a,b){a=a||window;var c=this.decode(a.name);return b?c?c[b]:void 0:c},"decode":function(a){var c={};if(a&&a.length>0)try{c=JSON.parse(b.decode(a))}catch(b){console&&console.log&&console.log("Cannot decode passed ui params",a)}return c}}}),("undefined"!=typeof _AP?define:AP.define)("_jwt",["_base64"],function(a){"use strict";function b(a){return c(a).iss}function c(b){if(null===b||""===b)throw"Invalid JWT: must be neither null nor empty-string.";var c=b.indexOf("."),d=b.indexOf(".",c+1);if(c<0||d<=c)throw'Invalid JWT: must contain 2 period (".") characters.';var e=b.substring(c+1,d);if(null===e||""===e)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";var f=a.decode(e);return JSON.parse(f)}function d(a,b){void 0===b&&(b=60);var d=c(a),e=0,f=Math.floor(Date.now()/1e3);return d&&d.exp&&(e=d.exp),e-f<b}return{"parseJwtIssuer":b,"parseJwtClaims":c,"isJwtExpired":d}});var deps=["_events","_jwt","_uri","_create-iframe"];("undefined"!=typeof _AP?define:AP.define)("_xdm",deps,function(a,b,c,d){"use strict";function e(b,g,h){function i(a,b,c){try{var d=H,e=A;if("undefined"==typeof c||null==c)return d.postMessage({"c":B,"i":a,"k":G,"t":b,"m":c},e);var f=c.n;c.a&&(c.a=x(c.a)),"registerInnerIframe"===f&&(d=window.top,e="*");var g=["resize","sizeToParent","init"];return g.indexOf(f)>-1&&(d=window.parent,e="*"),d.postMessage({"c":B,"i":a,"k":G,"t":b,"m":c},e)}catch(a){v(t(a))}}function j(a,b,c,d){var e=Math.floor(1e9*Math.random()).toString(16);N.add(e,c,d),i(e,"request",{"n":a,"a":b})}function k(a,b){i(a,"done",b)}function l(a,b){i(a,"fail",b)}function m(a){try{var b,c=a.data,d=c.i,e=c.c,f=c.t,g=c.m;if("object"==typeof g&&null!=g&&(b=g.n),"registerInnerIframe"!==b&&(a.source!==H&&a.source!==window.parent&&a.source!==window.top||a.origin.toLowerCase()!==A||e!==B))return;if("request"===f){var h,i,j,m=g.a,n=K[b];if(n){h=function(a){k(d,a)},i=function(a){l(d,a)},j=(m?m.length:0)<n.length;var o=K;y.isHost===!0?(o=y,o.analytics&&o.analytics.trackBridgeMethod(b)):o.isHost=!1;try{j?n.apply(o,m.concat([h,i])):h(n.apply(o,m))}catch(a){i(t(a)),w(a)}}else u("Unhandled request:",c)}else"done"!==f&&"fail"!==f||N.invoke(f,d,g)||u("Unhandled response:",f,d,g)}catch(a){v(t(a))}}function n(a){return function(){function c(){if(b.isFunction(f[f.length-1]))return f.pop()}var d,e,f=[].slice.call(arguments);e=c(),d=c(),d||(d=e,e=void 0),j(a,f,d,e)}}function o(a){y.isActive()?m(a.originalEvent?a.originalEvent:a):q()}function p(){b(window).bind("message",o)}function q(){b(window).unbind("message",o)}function r(a,b){return new c.init(a).getQueryParamValue(b)}function s(a){return new c.init(a).origin()}function t(a){return a.message||a.toString()}function u(){e.debug&&v.apply(window,["DEBUG:"].concat([].slice.call(arguments)))}function v(){var a=b.log||window.AJS&&window.AJS.log;a&&a.apply(window,arguments)}function w(){var a=window.AJS&&window.AJS.error;a&&a.apply(window,arguments)}function x(a){var b=[];return function a(c){var d,e,f;if(!("object"!=typeof c||null===c||c instanceof Boolean||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof File||c instanceof FileList||c instanceof Error||c instanceof Node)){if(b.indexOf(c)>-1)return v("XDM: A circular reference was detected and removed from the message."),null;if(b.push(c),Array.isArray(c))for(f=[],d=0;d<c.length;d++)f[d]=a(c[d]);else{f={};for(e in c)if(c.hasOwnProperty(e)){var g=a(c[e]);null!==g&&(f[e]=g)}}return f}return"function"==typeof c?(v("XDM: A function was detected and removed from the message."),null):c instanceof Error?(v("XDM: An Error object was detected and removed from the message."),{}):c instanceof Node?(v("XDM: A Node object was detected and removed from the message."),{}):c}(a)}var y,z,A,B,C,D,E,F,G,H,I,J=window.location.toString(),K=h.local||{},L=h.remote||[],M=s(J),N=function(){var a={};return{"add":function(b,c,d){a[b]={"done":c||null,"fail":d||null,"async":!!c}},"invoke":function(b,c,d){var e;return a[c]&&(a[c][b]?(a[c][b](d),e=!0):e=!a[c].async&&"fail"!==b,delete a[c]),e}}}(),O=!/xdm_e/.test(J);g.noIframe?H=g.target:(I=d(g),H=I.contentWindow),O||void 0!==I?(D="IsNotUsed",E=g.remoteKey,G=E,F=E,A=(g.remoteOrigin?g.remoteOrigin:s(g.remote)).toLowerCase(),B=g.channel,C={"isHost":!0,"iframe":I,"uiParams":g.uiParams,"isActive":function(){return O||H===window.top?!O||!I||b.contains(document.documentElement,y.iframe):document.contains(y.iframe)}},O&&(C.destroy=function(){window.clearTimeout(y.timeout),q(),y.iframe&&(b(y.iframe).remove(),delete y.iframe)},I&&b(I).on("ra.iframe.destroy",C.destroy))):(D="local",G=r(J,"xdm_deprecated_addon_key_do_not_use"),F=D,A=r(J,"xdm_e").toLowerCase(),B=r(J,"xdm_c"),C={"isHost":!1,"isActive":function(){return!0}}),z=F+"|"+(f+=1),y=b.extend({"id":z,"remoteOrigin":A,"channel":B,"addonKey":F},C),b.each(L,function(a,b){"number"==typeof a&&(a=b),y[a]=n(a)});var P=y.events=new a.Events(D,M);P.onAny(function(){var a=arguments[arguments.length-1],c=a.trace=a.trace||{},d=y.id+"|xdm";(y.isHost&&!c[d]&&a.source.channel!==y.id||!y.isHost&&a.source.key===D)&&(c[d]=!0,a=b.extend({},a),delete a.trace,u("Forwarding "+(y.isHost?"host":"addon")+" event:",a),j("_event",[a]))}),K._event=function(a){delete a.trace,this.isHost&&(a.source={"channel":this.id||z,"key":this.addonKey,"origin":this.remoteOrigin||A}),u("Receiving as "+(this.isHost?"host":"addon")+" event:",a),P._emitEvent(a)},p();var Q=this;return y.bridgeReceive=function(){return m.apply(Q,arguments)},y}var f=0;return e}),("undefined"!=typeof _AP?define:AP.define)("_create-iframe",["_ui-params","_dispatch-custom-event"],function(a,b){return function(c){if(!c.container)throw new Error("config.container must be defined");var d=document.createElement("iframe"),e="easyXDM_"+c.container+"_provider",f="";c.uiParams&&(f=a.encode(c.uiParams)),d.id=e,d.name=f,d.frameBorder="0",Object.keys(c.props).forEach(function(a){d[a]=c.props[a]}),d.setAttribute("rel","nofollow"),d.className="ap-iframe";var g=document.getElementById(c.container);return g&&g.appendChild(d),b(d,"ra.iframe.create"),d.src=c.remote,d}}),("undefined"!=typeof _AP?define:AP.define)("_dispatch-custom-event",[],function(){return function(a,b,c){var d;return window.CustomEvent&&"function"==typeof window.CustomEvent?d=new CustomEvent(b,{"detail":c}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c)),a.dispatchEvent(d)}}),AP.define("_rpc",["_dollar","_xdm","_util","_create-iframe","_dispatch-custom-event"],function(a,b,c,d,e){"use strict";var f,g,h=a.each,i=a.extend,j=a.isFunction,k={},l={},m=["init"],n={},o={},p=[],q=[];return{"extend":function(a){j(a)&&(a=a(k)),i(l,a.apis),i(n,a.internals),i(o,a.internalsForFrame),m=m.concat(a.stubs||[]);var b=a.init;j(b)&&p.push(b);var c=a.initForFrame;return j(c)&&q.push(c),a.apis},"init":function(c){c=c||{};var d=c.target||window.top;g||(h(l,function(a){m.push(a)}),f=this.rpc=new b(a,{"noIframe":!0,"target":d},{"remote":m,"local":n}),f.init(),i(k,f),h(p,function(b,d){try{d(i({},c),f)}catch(b){a.handleError(b)}}),g=!0)},"initWithFrame":function(c,d){var f=document.getElementById(d.container);if(f){var g=f.getElementsByTagName("iframe");g.length>0&&(e(g[0],"ra.iframe.destroy"),g[0].remove())}var j=new b(a,d,{"remote":m,"local":a.extend({},o)});h(q,function(a,b){try{var d=i({},c);b(d,j)}catch(a){console.log(a)}})}}}),AP.define("_create-inner-frame",["_ui-params","_rpc","_util"],function(a,b,c){function d(a){if(!a)throw new Error("ns undefined");return document.getElementById("embedded-"+a)}function e(c){"object"!=typeof c.uiParams&&(c.uiParams=a.fromUrl(c.src)||{});var d=c.ns,e="embedded-"+d,f="channel-"+d,g=c.w||"100%",h=c.h||"0";c.uiParams.isGeneral=!!c.general;var i={"remote":c.src,"remoteOrigin":c.origin,"remoteKey":c.key,"container":e,"channel":f,"props":{"width":g,"height":h},"uiParams":c.uiParams};c.productCtx&&!c.productContext&&(c.productContext=JSON.parse(c.productCtx)),b.initWithFrame(c,i)}return function(a){function b(){return d(a.ns)&&c<10?void setTimeout(function(){c++,b()},50):void e(a)}var c=0;b()}}),AP.require(["_rpc","_util","_dispatch-custom-event"],function(a,b,c){"use strict";function d(a){return isNaN(a)?a:a+"px"}function e(a,b){if(a!==document.body)return a.className.split(" ").indexOf(b)>-1?a:e(a.parentNode,b)}a.extend(function(){return{"initForFrame":function(a,f){f&&(f.resize=b.debounce(function(a,b){var f=e(this.iframe,"ap-container");c(f,"resized",{"width":a,"height":b}),this.iframe.style.width=d(a),this.iframe.style.height=d(b)}))},"internalsForFrame":{"resize":function(a,b){this.uiParams.isDialog||this.resize(a,b)}}}})}),AP.define("events",["_dollar","_rpc"],function(a,b){"use strict";return b.extend(function(b){var c={};return a.each(["on","once","onAny","off","offAll","offAny","emit"],function(a,d){c[d]=function(){var a=b.events;return a[d].apply(a,arguments),c}}),{"apis":c}})}),AP.define("env",["_dollar","_rpc","_ui-params"],function(a,b,c){"use strict";var d=c.fromWindowName(),e=Boolean(d.isInlineDialog),f=b.extend(function(b){return{"apis":{"version":"3.2.5","getLocation":function(a){b.getLocation(a)},"getUser":function(a){AP.require(["user"],function(b){if(b&&b.getUser)return b.getUser(a)})},"resize":a.debounce(function(a,c){var d=f.size(a,c,f.container());b.resize(d.w,d.h)},50),"sizeToParent":a.debounce(function(a){b.sizeToParent(a)},50)}}});return a.extend(f,{"meta":function(b){if(!(navigator.userAgent.indexOf("MSIE 8")>=0))return a("meta[name='ap-"+b+"']").attr("content");var c,d=document.getElementsByTagName("meta");for(c=0;c<d.length;c++)if(d[c].getAttribute("name")==="ap-"+b)return d[c].getAttribute("content")},"container":function(){var b=a(".ac-content, #content");return b.length>0?b[0]:document.body},"localUrl":function(a){return this.meta("local-base-url")+(null==a?"":a)},"size":function(a,b,c){var d,f,g=null==a?"100%":a;return c||(c=this.container()),e&&"100%"===a&&(g=Math.max(c.scrollWidth,c.offsetWidth,c.clientWidth)),b?d=b:(f=Math.max(c.scrollHeight,document.documentElement.scrollHeight,c.offsetHeight,document.documentElement.offsetHeight,c.clientHeight,document.documentElement.clientHeight),c===document.body?d=f:(d=Math.max(c.offsetHeight,c.clientHeight),0===d&&(d=f))),{"w":g,"h":d}}})}),AP.define("request",["_dollar","_rpc","_file"],function(a,b){"use strict";function c(a){var b=f({},a),c=a.headers||{};return delete b.headers,f(b,{"getResponseHeader":function(a){var b=null;return a&&(a=a.toLowerCase(),e(c,function(c,d){if(c.toLowerCase()===a)return b=d,!1})),b},"getAllResponseHeaders":function(){var a="";return e(c,function(b,c){a+=(a?"\r\n":"")+b+": "+c}),a}})}function d(a){return a instanceof Blob&&a.name?{"blob":a,"name":a.name,"_isBlob":!0}:a}var e=a.each,f=a.extend,g=b.extend(function(a){return{"apis":{"request":function(b,e){function f(a){return i(a[0],a[1],c(a[2]))}function g(a){return j(c(a[0]),a[1],a[2])}function h(){}var i,j;"object"==typeof b?e=b:e?e.url=b:e={"url":b},i=e.success||h,delete e.success,j=e.error||h,delete e.error,"multipart/form-data"===e.contentType&&Object.keys(e.data).forEach(function(a){var b=e.data[a];Array.isArray(b)?b.forEach(function(b,c){e.data[a][c]=d(b)}):e.data[a]=d(b)}),a.request(e,f,g)}}}});return g.request}),AP.require(["_dollar","_rpc"],function(a,b){"use strict";return b.extend(function(){return{"initForFrame":function(a,b){a=a||{},b.registerInnerIframe(a)},"stubs":["registerInnerIframe"]}})}),AP.define("dialog",["_dollar","_rpc","_ui-params","_uri"],function(a,b,c,d){"use strict";var e,f=c.fromUrl(window.location.toString()),g=Boolean(f.dlg)||Boolean(f.isDialog),h=new d.init(window.location.toString());return"1"===h.getQueryParamValue("dialog")&&(g=!0),b.extend(function(b){var c={};return e={"customData":f.customData,"create":function(a){return b.createDialog(a),{"on":function(a,c){b.events.once("dialog."+a,c)}}},"close":function(a){b.events.emit("dialog.close",a),b.closeDialog()},"isDialog":g,"onDialogMessage":function(a,b){this.getButton(a).bind(b)},"isCloseOnEscape":function(a){b.isCloseOnEscape(a)},"getButton":function(d){return{"name":d,"enable":function(){b.setDialogButtonEnabled(d,!0)},"disable":function(){b.setDialogButtonEnabled(d,!1)},"toggle":function(){var a=this;a.isEnabled(function(b){a[b?"disable":"enable"](d)})},"isEnabled":function(a){b.isDialogButtonEnabled(d,a)},"hide":function(a){b.setDialogButtonHidden(d,!0)},"show":function(a){b.setDialogButtonHidden(d,!1)},"isHidden":function(a){b.isDialogButtonHidden(d,a)},"bind":function(a){b.dialogListenerBound();var e=c[d];e||(e=c[d]=[]),e.push(a)},"trigger":function(){var b=this,e=!0,f=!0,g=c[d];return a.each(g,function(a,c){return f=c.call(b,{"button":b,"stopPropagation":function(){e=!1}}),e}),!!f}}},"createButton":function(a,c){return b.createButton(a,c),this.getButton(a)}},{"internals":{"dialogMessage":function(b){var c=!0;try{g?c=e.getButton(b).trigger():a.handleError("Received unexpected dialog button event from host:",b)}catch(b){a.handleError(b)}return c}},"stubs":["dialogListenerBound","setDialogButtonEnabled","setDialogButtonHidden","isDialogButtonEnabled","isDialogButtonHidden","isCloseOnEscape","createDialog","closeDialog","createButton"],"init":function(){g&&window.addEventListener("keydown",function(a){e.isCloseOnEscape(function(b){b&&27===a.keyCode&&e.close()})})}}}),e}),AP.define("inline-dialog",["_dollar","_rpc"],function(a,b){"use strict";var c;return b.extend(function(a){return c={"hide":function(){a.hideInlineDialog()}},{"stubs":["hideInlineDialog"]}}),c}),AP.define("messages",["_dollar","_rpc"],function(a,b){"use strict";function c(){return d++,"ap-message-"+d}var d=0;return b.extend(function(b){var d={};return a.each(["generic","error","warning","success","info","hint"],function(a,e){d[e]=function(a,d,f){return f=f||{},f.id=c(),b.showMessage(e,a,d,f),f.id}}),d.clear=function(a){b.clearMessage(a)},d.onClose=function(a,c){b.onClose(a,c)},{"apis":d,"stubs":["showMessage","clearMessage","onClose"]}})}),AP.define("cookie",["_dollar","_rpc"],function(a,b){"use strict";var c;return b.extend(function(a){return c={"save":function(b,c,d){a.saveCookie(b,c,d)},"read":function(b,c){a.readCookie(b,c)},"erase":function(b){a.eraseCookie(b)}},{"stubs":["saveCookie","readCookie","eraseCookie"]}}),c}),AP.define("history",["_dollar","_rpc","_ui-params"],function(a,b,c){"use strict";var d=[],e=c.fromWindowName(null,"historyState");return b.extend(function(b){var c={"getState":function(){return e},"go":function(a){b.historyGo(a)},"back":function(){return this.go(-1)},"forward":function(){return this.go(1)},"pushState":function(a){e=a,b.historyPushState(a)},"replaceState":function(a){e=a,b.historyReplaceState(a)},"popState":function(a){d.push(a)}};return{"apis":c,"internals":{"historyMessage":function(b){e=b.newURL;for(var c in d)try{d[c](b)}catch(b){a.log("History popstate callback exception: "+b.message)}}},"stubs":["historyPushState","historyGo","historyReplaceState"]}})}),(window.AP||window._AP).define("_resize-listener",["_dollar","_dispatch-custom-event"],function(a,b){"use strict";function c(a,b,c){var d="over"==b;a.addEventListener("OverflowEvent"in window?"overflowchanged":b+"flow",function(a){if(a.type==b+"flow"||0==a.orient&&a.horizontalOverflow==d||1==a.orient&&a.verticalOverflow==d||2==a.orient&&a.horizontalOverflow==d&&a.verticalOverflow==d)return a.flow=b,c.call(this,a)},!1)}function d(d,e){var f="onresize"in d;if(!f&&!d._resizeSensor){a("head").append({"tag":"style","type":"text/css","$text":".ac-resize-sensor,.ac-resize-sensor>div {position: absolute;top: 0;left: 0;width: 100%;height: 100%;overflow: hidden;z-index: -1;}"});var g=d._resizeSensor=document.createElement("div");g.className="ac-resize-sensor",g.innerHTML='<div class="ac-resize-overflow"><div></div></div><div class="ac-resize-underflow"><div></div></div>';var h=0,i=0,j=g.firstElementChild.firstChild,k=g.lastElementChild.firstChild,l=function(a){var c=!1,e=d.offsetWidth;h!=e&&(j.style.width=e-1+"px",k.style.width=e+1+"px",c=!0,h=e);var f=d.offsetHeight;i!=f&&(j.style.height=f-1+"px",k.style.height=f+1+"px",c=!0,i=f),c&&a.currentTarget!=d&&b(d,"resize")};"static"===getComputedStyle(d).position&&(d.style.position="relative",d._resizeSensor._resetPosition=!0),c(g,"over",l),c(g,"under",l),c(g.firstElementChild,"over",l),c(g.lastElementChild,"under",l),d.appendChild(g),l({})}var m=d._flowEvents||(d._flowEvents=[]);a.inArray(e,m)==-1&&m.push(e),f||d.addEventListener("resize",e,!1),d.onresize=function(b){a.each(m,function(a,c){c.call(d,b)})}}return{"addListener":d}}),AP.define("navigator",["_dollar","_rpc"],function(a,b){"use strict";return b.extend(function(a){var b={"go":function(b,c){a.go(b,c)},"reload":function(){a.reload()},"getLocation":function(b){a.getContext(b)}};return{"apis":b,"stubs":["getContext"]}})}),AP.define("_file",function(){try{new File([],"")}catch(a){File=function(a,b,c){var d=new Blob(a,c);return d.name=b,d.lastModifiedDate=new Date,d}}});
AP.define("user",["_dollar","_rpc"],function(b,c){var a=c.extend(function(d){return{apis:{getUser:function(e){d.getUser(e)
},getTimeZone:function(e){d.getTimeZone(e)
}}}
});
    AP.getUser=a.getUser;
    AP.getTimeZone=a.getTimeZone;
    return a
});
AP.define("jira",["_dollar","_rpc"],function(f,h){var i;
    var b;
    var a;
    var e;
    var d;
    var j={onSaveValidation:function(k){b=k
    },onSave:function(k){i=k
    },trigger:function(){var k=true;
        if(f.isFunction(b)){k=b.call()
        }return{valid:k,value:k?""+i.call():undefined}
    }};
    var c={onDashboardItemEdit:function(k){a=k
    },triggerEdit:function(){if(f.isFunction(a)){a.call()
    }}};
    var g=h.extend(function(k){return{apis:{getWorkflowConfiguration:function(l){k.getWorkflowConfiguration(l)
    },setDashboardItemTitle:function(l){k.setDashboardItemTitle(l)
    },isDashboardItemEditable:function(l){k.isDashboardItemEditable(l)
    },refreshIssuePage:function(){k.triggerJiraEvent("refreshIssuePage")
    },openCreateIssueDialog:function(m,l){e=m||null;
        k.openCreateIssueDialog(l)
    },openDatePicker:function(l){function n(p){return p&&p.nodeType&&p.nodeType==1
    }l=l||{};
        if(!l.position||typeof l.position!=="object"){if(!n(l.element)){throw new Error("Providing either options.position or options.element is required.")
        }l.position={}
        }if(!l.onSelect||typeof l.onSelect!=="function"){throw new Error("options.onSelect function is a required parameter.")
        }var m={element:l.element,position:{top:l.position.top||0,left:l.position.left||0},date:l.date,showTime:!!l.showTime,onSelect:l.onSelect};
        var o;
        d=m.onSelect;
        delete m.onSelect;
        if(m.element){o=m.element.getBoundingClientRect();
            m.position={left:o.left,top:o.top+o.height};
            delete m.element
        }k.openDatePicker(m)
    }},internals:{triggerDateSelectedListener:function(m,l){if(f.isFunction(d)){d.call({},m,l)
    }},setWorkflowConfigurationMessage:function(){return j.trigger()
    },triggerDashboardItemEdit:function(){return c.triggerEdit()
    },triggerIssueCreateSubmit:function(l){if(f.isFunction(e)){e.call({},l)
    }}},stubs:["triggerJiraEvent","openCreateIssueDialog"]}
    });
    return f.extend(g,{WorkflowConfiguration:j,DashboardItem:c})
});
AP.define("jira-servicedesk",["_dollar","_rpc"],function(b,c){var a=c.extend(function(d){return{apis:{getConfig:function(e){d.getConfig(e)
},serialize:function(e){d.serialize(e)
},validate:function(e){d.validate(e)
}},stubs:["getConfig","serialize","validate"]}
});
    return{jiraServiceDesk:{Automation:function(){return a
    }}}
});
AP.define("confluence",["_dollar","_rpc","events"],function(b,c,a){return c.extend(function(d){return{apis:{onMacroPropertyPanelEvent:function(e){b.each(e,function(f,g){a.on(f,g)
});
    d.onMacroPropertyPanelEvent()
},saveMacro:function(e,f){d.saveMacro(e,f)
},getMacroData:function(e){d.getMacroData(e)
},getMacroBody:function(e){d.getMacroBody(e)
},closeMacroEditor:function(){d.closeMacroEditor()
},closeMacroPropertyPanel:function(){d.closeMacroPropertyPanel()
},getContentProperty:function(e,f){d.getContentProperty(e,f)
},setContentProperty:function(e,f){d.setContentProperty(e,f)
}},stubs:["onMacroPropertyPanelEvent","saveMacro","getMacroData","getMacroBody","closeMacroEditor","closeMacroPropertyPanel","getContentProperty","setContentProperty"]}
})
});
AP.require(["_dollar","_rpc","_resize-listener","env","request","dialog","jira","jira-servicedesk","confluence","register_inner_iframe"],function(f,g,m,h,e,i,d,k,o){function b(){h.getLocation(function(p){f("head").append({tag:"base",href:p,target:"_parent"})
})
}function a(){var r=document.createElement("meta"),q=document.head||document.getElementsByTagName("head")[0],p=false;
    f("meta").each(function(t,s){if(s.getAttribute("http-equiv")==="X-UA-Compatible"){p=true;
        return false
    }});
    if(p===false){r.setAttribute("http-equiv","X-UA-Compatible");
        r.setAttribute("content","IE=edge");
        q.appendChild(r)
    }}function l(){var p=i.isDialog?"10px 10px 0 10px":"0";
    f("head").append({tag:"style",type:"text/css",$text:"body {margin: "+p+" !important;}"})
}g.extend({init:function(p){if(p.margin!==false){l(p)
}if(p.base===true){b(p)
}if(p.injectRenderModeMeta!==false||this.JSON===undefined){a()
}if(p.sizeToParent){h.sizeToParent(p.hideFooter===true)
}else{if(p.resize!==false){var q=p.resize;
    if(p.resize===undefined){q="auto"
    }q=q==="auto"?125:+q;
    if(q>=0&&q<60){q=60
    }if(!i.isDialog&&q>0){f.bind(window,"load",function(){var r;
        setInterval(function(){var s=h.size();
            if(!r||r.w!==s.w||r.h!==s.h){h.resize(s.w,s.h);
                r=s
            }},q)
    })
    }else{f.bind(window,"load",function(){h.resize();
        var r=h.container();
        if(r){m.addListener(r,function(){h.resize()
        })
        }else{f.log("Your page should have a root block element with an ID called #content or class called .ac-content if you want your page to dynamically resize after the initial load.")
        }})
    }}}}});
    f.extend(AP,h,d,k,{Meta:{get:h.meta},request:e,Dialog:i});
    var n={},c=f("script[src*='/atlassian-connect/all']");
    if(!(c&&/\/atlassian-connect\/all(-debug)?\.js($|\?)/.test(c.attr("src")))){c=f("#ac-iframe-options")
    }if(c&&c.length>0){var j=c.attr("data-options");
        if(j){f.each(j.split(";"),function(u,t){var p=f.trim;
            t=p(t);
            if(t){var s=t.split(":"),r=p(s[0]),q=p(s[1]);
                if(r&&q!=null){n[r]=q==="true"||q==="false"?q==="true":q
                }}})
        }}g.init(n)
});
